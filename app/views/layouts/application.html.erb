<!DOCTYPE html>
<html>
  <head>
    <title>Rolweb</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", media: 'all', "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "actiontext", media: 'all', "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= favicon_link_tag "icono.png"%>
  </head>

  <body <%= content_for?(:body_class) ? "class=#{yield(:body_class)}" : '' %>>
    <div class="navbar">
      
      <%# Esta subnavbar es realmente innecesaria a día de hoy, exsiste para poder acomodar una imagen %>
      <%# de logo tipo delante de ella, pero se eliminó. Sin embargo es más trabajo readaptar el css %>
      <%# para que se vea igual, así que la dejamos. %>
      <div class="subnavbar">
        <h1> Doors Maze</h1>
        <div class="subsubnavbar">

          <div class="submenu">
            <a href="/reglas" class="nblink">Información</a>
            <div class="submenu-content">
                <a href="/reglas">Reglas</a>
                <a href="/lore">Historia</a>
                <a href="/estadosAlterados">Estados Alterados</a>
            </div>
          </div>

          <div class="submenu">
            <%= link_to "Clases y habilidades", clases_path, class:"nblink" %>
            <div class="submenu-content">
              <%= link_to "Todas las clases", clases_path, class:"mainLink" %>
              <%= link_to "Todas las habilidades", habilidads_path, class:"mainLink" %>
              <%= link_to "Árbol de clases", "/clases-arbol", class:"mainLink" %>
              <%= link_to "Clases radicales", clases_path(mode:"radical"), class:"mainLink" %>
              <%= link_to "Razas", clases_path(mode:"raza"), class:"mainLink" %>
              <% navbar_cache_clases_ocultas.each do |clase| %>
                  <%= link_to clase.nombre, clase, class:"mainLink"  %>
              <% end %>
              <% navbar_cache_clases_visibles.each do |clase| %>
                  <%= link_to clase.nombre, clase %>
              <% end %>
            </div>
          </div>

          <div class="submenu">
            <%= link_to "Items", items_path, class:"nblink" %>
            <div class="submenu-content">
              <%= link_to "Todos los items", items_path, class:"mainLink" %>
              <%= link_to "Cofre aleatorio", "/lootbox", class:"mainLink" %>
              <% navbar_cache_categorias.each do |ct| %>
                  <%= link_to ct.nombre, ct %>
              <% end %>
            </div>
          </div>
          
          <div class="submenu">
            <%= link_to "Galería", pictures_path, class:"nblink" %>
          </div>

          <div class="submenu">
            <a href="/control" class="nblink">Admin</a>
            <div class="submenu-content">
              <%= link_to "Habilidades ocultas", "/habilidads_ocultas"%>
              <%= link_to "Habilidades sueltas", "/habilidads_sueltas"%>
              <%= link_to "Ítems sin categoría", "/items_no_categ"%>
              <%= link_to "Mobs", mobs_path %>
              <%= link_to "Crear mob", new_mob_path %>
              <%= link_to "Crear clase", new_clase_path %>
              <%= link_to "Crear habilidad", new_habilidad_path %>
              <%= link_to "Crear item", new_item_path %>
              <%= link_to "Crear categoría", new_categ_path %>
              <%= link_to "Crear cuadro", new_picture_path %>
              <%= link_to "Crear etiqueta", new_etiquet_path %>
            </div>
          </div>

        </div>
      </div>
      
    </div>

    <% # Divs para mostrar mensajes y alerta del sistema relacionados con el resutado de procesos %>
    <% if notice || alert %>
      <div class="flash-wrapper">
        <% if notice %>
          <div class="flash-notice">
            <span class="flash-close" onclick="this.parentElement.remove()">✕</span>
            <%= notice %>
          </div>
        <% end %>
        <% if alert %>
          <div class="flash-alert">
            <span class="flash-close" onclick="this.parentElement.remove()">✕</span>
            <%= alert %>
          </div>
        <% end %>
      </div>
    <% end %>



    <%= yield %>

    
    <footer class="footbar">
      <%= link_to "Aviso legal", "/avisolegal"%>
    </footer>

  </body>
</html>
