docker exec -it rolweb-web-1 bash

Importante sobre la versión de ruby. Es deseable que la versión de ruby siempre coincida en:
    - archivo .ruby-version
    - archivo Dockerfile
    - entorno de desarrollo

gemas:
    gem install "gema"
    bundle add "gema"
    bundle install


Para evitar romper la bd hacer commit de la bd con el contenedor apagado, si no:
CUANDO SE JODE LA INTEGRIDAD DE LA BD:
    1º en el compose:
        command: ["sleep", "infinity"]
    2º nos metemos como usuario root:
        docker exec -it -u postgres rolweb-db-1 /bin/bash
    3º le metemos la limpieza:
        pg_resetwal /var/lib/postgresql/data

Hacer dump de la base de datos, primero meterse en el server y luego:
    pg_dump --create -U postgres > dump.sql
    parece que es mejor hacerlo con pgAdmin


Restablecer credenciales de rails:
$env:EDITOR="code --wait"
rails credentials:edit

rails server
    start server

rails db:migrate
    meter modelos en la DB

GENERAR COSAS y ejemplos

    rails generate scaffold     LITERALMENTE LO HACE TODO

    rails generate model {nombre modelo} [{símbolo1}:{tipo1}  {símbolo2}:{tipo2} {...}]
        generar modelo {nombre modelo} (como clase y para luego tabla en DB)
        el tipo :references es especial, se usa para una asociación de uno a muchos. (lo ponemos en el muchos)
        tipos:
            :binary
            :boolean
            :date
            :datetime
            :decimal
            :float
            :integer
            :primary_key
            :string
            :text
            :time
            :timestamp

    rails generate controller {controlador1s} {controlador2s} {...} {--skip-routes}
        generar controladores para los modelos o rutas, no sé ej:
            rails generate controller Articles index --skip-routes
            rails generate controller Comments

    rails generate migration AddNombreDeCampoToNombreDeModelo nombre_de_campo:data_type
    rails generate migration RemoveNombreDeColumnaFromNombreDeModelo nombre_de_columna:data_type
    rails generate migration CreateJoinTablePrimerosSegundos primeros segundos

    Examples
        rails generate model picture nombre:string image:string
        rails generate model Mob nombre:string cuerpo:string 
        rails generate model Item nombre:string coste:decimal peso:decimal efecto:text image:string
        rails generate model Habilidad nombre:string nivel:integer efecto:string

        rails generate controller Item

        rails generate migration RemoveimagenFromHabilidad imagen:string
        rails generate migration AddimageToHabilidad image:string
        rails generate migration Drophabilidad
        rails generate migration drop_Habilidad
        rails generate migration AddOcultoToHabilidad oculto:boolean


rails console
    meterse en la consola de rails, para interactuar con modelos


reinstalar gemas:
    bundle install

Carpetas necesarias de la BD
    pg_commit_ts
    pg_logical/pg_logical
    pg_logical/snapshots
    pg_logical/mappings
    pg_notify
    pg_replslot
    pg_snapshots
    pg_tblspc
    pg_twophase

git config --global core.autocrlf false
    ni idea de esto

Editar credenciales desde Windows:
    $env:EDITOR="code --wait"
    rails credentials:edit

migraciones de imágenes:
    rake img_uploader:migrate_db_to_minio
    rake img_uploader:migrate_minio_to_db


borrar caché
    rails tmp:cache:clear